.. highlight:: none

概要
-----------

abICSでは, モンテカルロステップ毎に位置座標を更新しながら、ソルバー(VASP, QEなど)によるエネルギー計算などを行います.
そのため、位置座標以外の情報について予め用意する必要があります。これらの情報は、ソルバーの入力形式に従ったファイルを参照し取得します。


参照ファイルの準備
========================

使用するソルバーの入力形式に従った入力ファイルを用意します。
参照ファイルのパスはabICSの入力ファイルにある ``[solver]`` セクションの ``base_input_dir`` で指定します。
座標情報については、abICSの入力ファイルを参照するため、記載する必要はありません。
以下、QEの参照ファイルの例について記載します。

.. literalinclude::  ../../../../../examples/standard/spinel/baseinput/scf.in

		     
		     
入力ファイルの作成
========================

次にabICSの入力ファイルを作成します。
abICSの入力ファイルは, 以下の４つのセクションから構成されます.

1. [replica] セクション
   レプリカ数や温度の幅, モンテカルロステップ数など,レプリカ交換モンテカルロ部分のパラメータを指定します.

2. [solver] セクション
   ソルバーの種類 (VASP, QE, ...)、ソルバーへのパス、不変な入力ファイルのあるディレクトリなど（第一原理計算）ソルバーのパラメータを指定します.

3. [observer] セクション
   取得する物理量の種類などを指定します.

4. [config] セクション
   合金の配位などを指定します.

これらの詳細については :doc:`../file_specification/index` をご覧ください。
以下、QEの場合の入力ファイルの例を記載します。

.. literalinclude::  ../../../../../examples/standard/spinel/input_qe.toml


abICSの実行
========================

ここで指定するプロセス数はレプリカ数と同じである必要があります。

（MPI_Comm_spawn に由来する様々な事項（実際に割り当てられるプロセスの話やmpiexec のオプションなど）をここかどこかに記載する必要がある）

::

 $ mpiexec -np 2 abics input.toml


